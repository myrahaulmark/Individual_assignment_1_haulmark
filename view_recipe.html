document.addEventListener("DOMContentLoaded", async () => {
    const params = new URLSearchParams(window.location.search);
    const recipeId = params.get("id");
    const recipeApiUrl = `https://www.themealdb.com/api/json/v1/1/lookup.php?i=${recipeId}`;

    try {
        const response = await fetch(recipeApiUrl);
        const data = await response.json();
        const recipe = data.meals[0];

        // Populate recipe details
        document.getElementById('recipe-title').textContent = recipe.strMeal;
        document.getElementById('recipe-image').src = recipe.strMealThumb;
        document.getElementById('recipe-category').textContent = recipe.strCategory;
        document.getElementById('recipe-instructions').textContent = recipe.strInstructions;

        // Populate ingredients
        const ingredientsList = document.getElementById('ingredients-list');
        for (let i = 1; i <= 20; i++) {
            const ingredient = recipe[`strIngredient${i}`];
            const measure = recipe[`strMeasure${i}`];
            if (ingredient && ingredient.trim() !== '') {
                const listItem = document.createElement('li');
                listItem.textContent = `${measure} ${ingredient}`;
                ingredientsList.appendChild(listItem);
            }
        }
    } catch (error) {
        console.error('Error fetching recipe details:', error);
    }
});
